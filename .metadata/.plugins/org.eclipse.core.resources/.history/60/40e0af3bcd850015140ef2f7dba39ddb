'''
8 3
6 7
2 4
1 8
'''
from collections import defaultdict
N,M = map(int,raw_input().split())
li = []

for _ in xrange(M):
    li.append(map(int,raw_input().split()))
    
li.sort(key = lambda item: item[0], reverse = True)

print li
r = 0
h = {}

i = 1
h[(li[0][0],li[0][1])] = 1
while i < M:
    a1,b1 = li[i]
    j = i - 1
    while j >= 0:
        a2,b2 = li[j]
        if a1 <= a2 and b1 >= b2:
            h[(a1,b1)] = h[(a2,b2)] + 1
            break
        j -= 1
    else:
        h[(li[i][0],li[i][1])] = 1
    i += 1


print h
    
x = sorted(list(h.iteritems()),key = lambda item:item[1])  
x1 = defaultdict(list)
for l in x:
    x1[l[1]].append(l[0])

r = 1
while True:
    if x1.get(r) and x1.get(r+1):
        a = h[r]
        b = h[r+1]
        
        
    else:
        break
  
    

