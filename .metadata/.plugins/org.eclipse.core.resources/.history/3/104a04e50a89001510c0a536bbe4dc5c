class Solution(object):
    def isMatch(self, s, p):
        """
        :type s: str
        :type p: str
        :rtype: bool
        """
        
        
        def recurse(s, p, i, j):
            if i == len(s) and j == len(p):
                return True
            elif i == len(s):
                while j < len(p) and p[j] == "*":
                    j += 1
                return j == len(p)
            elif j == len(p):
                return False
            elif p[j] == "?":
                return recurse(s, p, i + 1, j + 1)
            elif p[j] == s[i]:
                return recurse(s, p, i + 1, j + 1)
            elif p[j] == "*":
                for index in xrange(i, len(s) + 1):
                    res = recurse(s, p, index, j + 1)
                    if res:
                        return True
                else:
                    return False
            else:
                return False
                
        return recurse(s, p, 0, 0)
                
if __name__ == '__main__':
    s = Solution()
    s.isMatch("babaaababaabababbbbbbaabaabbabababbaababbaaabbbaaab"
, "***bba**a*bbba**aab**b")
